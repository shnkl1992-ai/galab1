<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Ù‚Ù„Ø§Ø¨ 1 - Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ø·Ø©</title>
<style>
body { margin:0; font-family:Tahoma; background:#0b1020; color:#fff; text-align:center; }
h1 { margin:10px; font-size:20px; }
button { margin:5px; padding:10px; font-size:16px; border-radius:8px; border:none; }
#arena { display:flex; flex-wrap:wrap; justify-content:center; margin-top:20px; }
.player { background:#1c2333; margin:5px; padding:10px; border-radius:10px; min-width:120px; }
.cards { margin:10px 0; }
.card { display:inline-block; padding:5px 8px; margin:2px; background:#333; border-radius:6px; }
#table { margin:20px; padding:10px; background:#162030; border-radius:10px; }
</style>
</head>
<body>

<h1>ðŸŽ´ Ù‚Ù„Ø§Ø¨ 1 â€” Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ø·Ø© (6 Ù„Ø§Ø¹Ø¨ÙŠÙ†)</h1>
<button onclick="deal()">ØªÙˆØ²ÙŠØ¹ Ø¬Ø¯ÙŠØ¯</button>
<button onclick="buy()">Ø´Ø±Ø§Ø¡ Ù…Ù† Ø§Ù„Ø£Ø±Ø¶</button>
<button onclick="score()">Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·</button>

<div id="table">Ø§Ù„Ø£Ø±Ø¶: <span id="ground"></span></div>
<div id="arena"></div>
<div id="results"></div>

<script>
let deck = [];
let players = [];
let ground = [];

function createDeck(){
  let suits = ["â™ ","â™¥","â™¦","â™£"];
  let values = ["1","2","3","4","5","6","7","8","9","10","J","Q","K"];
  let cards = [];
  for(let s of suits){
    for(let v of values){
      cards.push(v+s);
    }
  }
  return cards;
}

function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

function deal(){
  deck = shuffle(createDeck());
  players = [];
  for(let i=0;i<6;i++){
    let hand = deck.splice(0,5);
    if(i===0) hand.push(deck.pop()); // Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯ ÙŠØ£Ø®Ø° 6 ÙƒØ±ÙˆØª
    players.push({id:i+1,hand:hand,captures:[]});
  }
  // Ø£ÙˆØ±Ø§Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¶ (5 Ø¨Ø·Ø§Ù‚Ø§Øª)
  ground = deck.splice(0,5);
  render();
}

function buy(){
  let current = players[0]; // Ù†Ø®Ù„ÙŠ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ Ù‡Ùˆ Ø§Ù„Ù„ÙŠ ÙŠØ´ØªØ±ÙŠ Ù…Ø¨Ø¯Ø¦ÙŠØ§Ù‹
  if(current.hand.length===0){ alert("Ù…Ø§ Ø¹Ù†Ø¯Ù‡ ÙƒØ±ÙˆØª ÙŠØ´ØªØ±ÙŠ ÙÙŠÙ‡Ø§"); return; }
  let card = current.hand.pop(); // ÙŠØ§Ø®Ø° Ø¢Ø®Ø± ÙƒØ±Øª
  let matchIndex = ground.findIndex(c=>c.slice(0,-1)===card.slice(0,-1));
  if(matchIndex>-1){
    let taken = ground.splice(matchIndex,1)[0];
    current.captures.push(card,taken);
  }else{
    ground.push(card);
  }
  render();
}

function score(){
  let res="";
  for(let p of players){
    let points=0;
    for(let c of p.captures){
      let v=c.slice(0,-1);
      if(v==="10"||v==="J"||v==="Q"||v==="K"||v==="1") points++;
    }
    res+=`Ù„Ø§Ø¹Ø¨ ${p.id}: ${points} Ù†Ù‚Ø·Ø©<br>`;
  }
  document.getElementById("results").innerHTML=res;
}

function render(){
  let arena=document.getElementById("arena");
  arena.innerHTML="";
  for(let p of players){
    let div=document.createElement("div");
    div.className="player";
    div.innerHTML=`<b>Ù„Ø§Ø¹Ø¨ ${p.id}</b><div class="cards">${p.hand.map(c=>`<span class="card">${c}</span>`).join("")}</div>
    <div>Ù…Ø¬Ù…Ø¹: ${p.captures.map(c=>`<span class="card">${c}</span>`).join("")}</div>`;
    arena.appendChild(div);
  }
  document.getElementById("ground").innerHTML=ground.map(c=>`<span class="card">${c}</span>`).join("");
}
</script>
</body>
</html>
